<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-community/creating_eggs/creating_a_custom_image" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Creating a Custom Docker Image | Pterodactyl</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://quintenqvd0.github.io/pterodactyl-documentation/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://quintenqvd0.github.io/pterodactyl-documentation/img/social-card.png"><meta data-rh="true" property="og:url" content="https://quintenqvd0.github.io/pterodactyl-documentation/docs/eggs/image/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Creating a Custom Docker Image | Pterodactyl"><meta data-rh="true" name="description" content="This tutorial uses examples from our yolks:java_17 docker image,"><meta data-rh="true" property="og:description" content="This tutorial uses examples from our yolks:java_17 docker image,"><link data-rh="true" rel="icon" href="/pterodactyl-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://quintenqvd0.github.io/pterodactyl-documentation/docs/eggs/image/"><link data-rh="true" rel="alternate" href="https://quintenqvd0.github.io/pterodactyl-documentation/docs/eggs/image/" hreflang="en"><link data-rh="true" rel="alternate" href="https://quintenqvd0.github.io/pterodactyl-documentation/docs/eggs/image/" hreflang="x-default"><link rel="stylesheet" href="/pterodactyl-documentation/assets/css/styles.b313d344.css">
<script src="/pterodactyl-documentation/assets/js/runtime~main.70718c84.js" defer="defer"></script>
<script src="/pterodactyl-documentation/assets/js/main.2f3493ad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><b> Stand with Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://www.savethechildren.org/us/where-we-work/ukraine">Donate</a> <a target="_blank" rel="noopener noreferrer" href="https://razomforukraine.org/">Today</a></b></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pterodactyl-documentation/"><div class="navbar__logo"><img src="/pterodactyl-documentation/img/pterry.svg" alt="Pterodactyl" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pterodactyl-documentation/img/pterry.svg" alt="Pterodactyl" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pterodactyl</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/pterodactyl-documentation/docs/project/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pterodactyl-documentation/docs/community/">Community Guides</a><a href="https://discord.gg/pterodactyl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Get Help<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/pterodactyl/panel" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://dashflo.net/docs/api/pterodactyl/v1/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pterodactyl-documentation/docs/community/">Community Guides</a><button aria-label="Collapse sidebar category &#x27;Community Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/about/">Community Guides and Tutorials</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pterodactyl-documentation/docs/community/panel/">Panel Installation</a><button aria-label="Collapse sidebar category &#x27;Panel Installation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/panel/install/centos7/">CentOS 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/panel/install/centos8/">CentOS 8, Rocky Linux 8, AlmaLinux 8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/panel/install/debian/">Debian 11 &amp; 12</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pterodactyl-documentation/docs/community/wings/">Wings Installation</a><button aria-label="Collapse sidebar category &#x27;Wings Installation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/wings/install/centos7/">CentOS 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/wings/install/centos8/">CentOS 8, Rocky Linux 8, AlmaLinux 8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/wings/install/debian/">Debian 11 &amp; 12</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/pterodactyl-documentation/docs/eggs/">Creating Eggs</a><button aria-label="Collapse sidebar category &#x27;Creating Eggs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/eggs/egg/">Creating a Custom Egg</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pterodactyl-documentation/docs/eggs/image/">Creating a Custom Docker Image</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pterodactyl-documentation/docs/games/">Game Configuration</a><button aria-label="Collapse sidebar category &#x27;Game Configuration&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/games/minecraft/">Minecraft</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pterodactyl-documentation/docs/community/tutorials/">Tutorials</a><button aria-label="Collapse sidebar category &#x27;Tutorials&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/tutorials/node/">Creating a New Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/community/tutorials/artisan/">Artisan CLI</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pterodactyl-documentation/docs/customization/">Customization</a><button aria-label="Collapse sidebar category &#x27;Customization&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/customization/panel/">Building Panel Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pterodactyl-documentation/docs/customization/wings/">Building Wings</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pterodactyl-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pterodactyl-documentation/docs/eggs/"><span itemprop="name">Creating Eggs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Creating a Custom Docker Image</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="creating-a-custom-docker-image">Creating a Custom Docker Image</h1>
<admonition type="warning"><p>This tutorial uses examples from our <a href="https://github.com/pterodactyl/yolks/tree/master/java/17"><code>yolks:java_17</code></a> docker image,
which can be found on GitHub. This tutorial also assumes some knowledge of <a href="https://docker.io/">Docker</a>, we suggest
reading up if this all looks foreign to you.</p></admonition>
<h2 id="creating-the-dockerfile">Creating the Dockerfile</h2>
<p>The most important part of this process is to create the <a href="https://docs.docker.com/engine/reference/builder/"><code>Dockerfile</code></a>
that will be used by the Daemon. Due to heavy restrictions on server containers, you must setup this file in a specific manner.</p>
<p>We try to use a <a href="https://www.debian.org">Debian based OS</a> as much as possible for our images</p>
<pre><code class="language-bash">FROM        --platform=$TARGETOS/$TARGETARCH eclipse-temurin:17-jdk-jammy

LABEL       author=&quot;Matthew Penner&quot; maintainer=&quot;matthew@pterodactyl.io&quot;

LABEL       org.opencontainers.image.source=&quot;https://github.com/pterodactyl/yolks&quot;
LABEL       org.opencontainers.image.licenses=MIT

RUN 		apt-get update -y \
 			&amp;&amp; apt-get install -y lsof curl ca-certificates openssl git tar sqlite3 fontconfig libfreetype6 tzdata iproute2 libstdc++6 \
 			&amp;&amp; useradd -d /home/container -m container

USER        container
ENV         USER=container HOME=/home/container
WORKDIR     /home/container

COPY        ./../entrypoint.sh /entrypoint.sh
CMD         [ &quot;/bin/bash&quot;, &quot;/entrypoint.sh&quot; ]
</code></pre>
<p>Lets walk through the <code>Dockerfile</code> above. The first thing you&#x27;ll notice is the <a href="https://docs.docker.com/engine/reference/builder/#from"><code>FROM</code></a> declaration.</p>
<pre><code class="language-bash">FROM --platform=$TARGETOS/$TARGETARCH eclipse-temurin:17-jdk-jammy
</code></pre>
<p>The <code>--platform=$TARGETOS/$TARGETARCH</code> allows us to specify in the github workflow that we want to build for linux/amd64 and linux/arm64. See <a href="https://docs.docker.com/engine/reference/builder/#from">Docker docs</a></p>
<p>In this case, we are using <a href="https://github.com/adoptium/containers/tree/main"><code>eclipse-temurin:17-jdk-jammy</code></a> which provides us with Java 17.</p>
<h2 id="installing-dependencies">Installing Dependencies</h2>
<p>The next thing we do is install the dependencies we will need using Debian/Ubuntu&#x27;s package manager: <code>apt</code>. You&#x27;ll notice some
specific flags <code>-y</code> as the docker build is non interactive, as well as everything being contained in a
single <a href="https://docs.docker.com/engine/reference/builder/#run"><code>RUN</code></a> block.</p>
<admonition type="warning"><p>The dependency <code>iproute2</code> is required in every docker container to make the ip command work</p></admonition>
<h2 id="files-in-the-docker-image">Files In The Docker Image</h2>
<admonition type="warning"><p>Because the way that Pterodactyl works, it is not possible to store any files within the Docker image at <code>/home/container</code>.</p></admonition>
<p>All files must be downloaded with the egg install script, this means for example that you can not put your bot files or minecraft server jars in the Docker image as you can with regular docker images.</p>
<h2 id="creating-a-container-user">Creating a Container User</h2>
<p>Within this <code>RUN</code> block, you&#x27;ll notice the <code>useradd</code> command.</p>
<pre><code class="language-bash"> useradd -d /home/container -m container
</code></pre>
<admonition type="warning"><p>All Pterodactyl containers must have a user named <code>container</code>, and the user home <strong>must</strong> be <code>/home/container</code>.</p></admonition>
<p>After we create that user, we then define the default container <a href="https://docs.docker.com/engine/reference/builder/#user"><code>USER</code></a>
as well as a few <a href="https://docs.docker.com/engine/reference/builder/#env"><code>ENV</code></a> settings to be applied to things running
within the container.</p>
<h2 id="work-directory--entrypoint">Work Directory &amp; Entrypoint</h2>
<p>One of the last things we do is define a <a href="https://docs.docker.com/engine/reference/builder/#workdir"><code>WORKDIR</code></a> which
is where everything else will be executed. The <code>WORKDIR</code> must be set the <code>/home/container</code>.</p>
<p>Finally, we need to copy our <a href="https://docs.docker.com/engine/reference/builder/#entrypoint"><code>ENTRYPOINT</code></a> script into
the docker image root. This is done using <a href="https://docs.docker.com/engine/reference/builder/#copy"><code>COPY</code></a>, after which
we define the command to be used when the container is started using <a href="https://docs.docker.com/engine/reference/builder/#cmd"><code>CMD</code></a>.
The <code>CMD</code> line should always point to the <code>entrypoint.sh</code> file.</p>
<pre><code class="language-bash">COPY        ./../entrypoint.sh /entrypoint.sh
CMD         [ &quot;/bin/bash&quot;, &quot;/entrypoint.sh&quot; ]
</code></pre>
<h2 id="entrypoint-script">Entrypoint Script</h2>
<p>In order to complete this <code>Dockerfile</code>, we will need an <code>entrypoint.sh</code> file which tells Docker how to run this
specific server type.</p>
<p>These entrypoint files are actually fairly abstracted, and the Daemon will pass in the start command as an environment
variable before processing it and then executing the command.</p>
<pre><code class="language-bash"># Default the TZ environment variable to UTC.
TZ=${TZ:-UTC}
export TZ

# Set environment variable that holds the Internal Docker IP
INTERNAL_IP=$(ip route get 1 | awk &#x27;{print $(NF-2);exit}&#x27;)
export INTERNAL_IP

# Switch to the container&#x27;s working directory
cd /home/container || exit 1

# Print Java version
printf &quot;\033[1m\033[33mcontainer@pterodactyl~ \033[0mjava -version\n&quot;
java -version

# Convert all of the &quot;{{VARIABLE}}&quot; parts of the command into the expected shell
# variable format of &quot;${VARIABLE}&quot; before evaluating the string and automatically
# replacing the values.
PARSED=$(echo &quot;${STARTUP}&quot; | sed -e &#x27;s/{{/${/g&#x27; -e &#x27;s/}}/}/g&#x27; | eval echo &quot;$(cat -)&quot;)

# Display the command we&#x27;re running in the output, and then execute it with the env
# from the container itself.
printf &quot;\033[1m\033[33mcontainer@pterodactyl~ \033[0m%s\n&quot; &quot;$PARSED&quot;
# shellcheck disable=SC2086
exec env ${PARSED}
</code></pre>
<p>First we set the timezone.</p>
<pre><code class="language-bash">TZ=${TZ:-UTC}
export TZ
</code></pre>
<p>Then we make the internal ip avaible in the docker container.</p>
<pre><code class="language-bash">INTERNAL_IP=$(ip route get 1 | awk &#x27;{print $(NF-2);exit}&#x27;)
export INTERNAL_IP
</code></pre>
<p>The third command, <code>cd /home/container</code>, simply ensures we are in the correct directory when running the rest of the
commands. We then follow that up with <code>java -version</code> to output this information to end-users, but that is not necessary.</p>
<h2 id="modifying-the-startup-command">Modifying the Startup Command</h2>
<p>The most significant part of this file is the <code>MODIFIED_STARTUP</code> environment variable. What we are doing in this case
is parsing the environment <code>STARTUP</code> that is passed into the container by the Daemon. In most cases, this variable
looks something like the example below:</p>
<pre><code class="language-bash">STARTUP=&quot;java -Xms128M -XX:MaxRAMPercentage=95.0 -jar {{SERVER_JARFILE}}&quot;
</code></pre>
<admonition title="v-pre" type="note"><p>You&#x27;ll notice some placeholders there, specifically <code>{{SERVER_JARFILE}}</code>. These refer to
other environment variables being passed in, and they look something like the example below.</p></admonition>
<pre><code class="language-bash">SERVER_JARFILE=server.jar
</code></pre>
<p>There are a host of different environment variables, and they change depending on the specific service option
configuration. However, that is not necessarily anything to worry about here.</p>
<pre><code class="language-bash">PARSED=$(echo &quot;${STARTUP}&quot; | sed -e &#x27;s/{{/${/g&#x27; -e &#x27;s/}}/}/g&#x27; | eval echo &quot;$(cat -)&quot;)
</code></pre>
<admonition title="v-pre" type="note"><p>The command above simply evaluates the <code>STARTUP</code> environment variable, and then replaces anything surrounded in
curly braces <code>{{EXAMPLE}}</code> with a matching environment variable (such as <code>EXAMPLE</code>). Thus, our <code>STARTUP</code> command:</p></admonition>
<pre><code class="language-bash">java -Xms128M -XX:MaxRAMPercentage=95.0 -jar {{SERVER_JARFILE}}
</code></pre>
<p>Becomes:</p>
<pre><code class="language-bash">java -Xms128M -XX:MaxRAMPercentage=95.0 -jar server.jar
</code></pre>
<h2 id="run-the-command">Run the Command</h2>
<p>The last step is to run this modified startup command, which is done with the line <code>exec env ${PARSED}</code>.</p>
<h3 id="note">Note</h3>
<p>Sometimes you may need to change the permissions of the <code>entrypoint.sh</code> file, on linux you can do this by executing <code>chmod +x entrypoint.sh</code> in the directory where the file is.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/QuintenQVD0/pterodactyl-documentation/blob/main/docs/community/creating_eggs/creating_a_custom_image.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pterodactyl-documentation/docs/eggs/egg/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Creating a Custom Egg</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pterodactyl-documentation/docs/games/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Game Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-the-dockerfile" class="table-of-contents__link toc-highlight">Creating the Dockerfile</a></li><li><a href="#installing-dependencies" class="table-of-contents__link toc-highlight">Installing Dependencies</a></li><li><a href="#files-in-the-docker-image" class="table-of-contents__link toc-highlight">Files In The Docker Image</a></li><li><a href="#creating-a-container-user" class="table-of-contents__link toc-highlight">Creating a Container User</a></li><li><a href="#work-directory--entrypoint" class="table-of-contents__link toc-highlight">Work Directory &amp; Entrypoint</a></li><li><a href="#entrypoint-script" class="table-of-contents__link toc-highlight">Entrypoint Script</a></li><li><a href="#modifying-the-startup-command" class="table-of-contents__link toc-highlight">Modifying the Startup Command</a></li><li><a href="#run-the-command" class="table-of-contents__link toc-highlight">Run the Command</a><ul><li><a href="#note" class="table-of-contents__link toc-highlight">Note</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"> </div><ul class="footer__items clean-list"><li class="footer__item">
                <a>
                  <img src="https://raw.githubusercontent.com/QuintenQVD0/pterodactyl-documentation/main/static/img/banner_logo.png" alt="" width="300" height="72">
                </a>
                <p>
                Since 2015 PterodactylÂ® has been delivering robust, performant, and secure software that allows individuals, networks, and hosting companies to run game servers at scale; easily. Best of all? No exorbitant monthly costs.<br><br>
                Take the plunge today and discover why thousands of users trust PterodactylÂ® to manage their game servers. 
                </p>
              </li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/pterodactyl/panel" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/sponsors/matthewpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsor<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://paypal.me/PterodactylSoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Donate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://discord.gg/pterodactyl" target="_blank" rel="noreferrer noopener" aria-label="">
                  <img src="https://raw.githubusercontent.com/QuintenQVD0/pterodactyl-documentation/main/static/img/discord.png" alt="" width="280" height="85">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">MIT Licensed | Pterodactyl Â© 2015-2024 Dane Everitt & contributors. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>