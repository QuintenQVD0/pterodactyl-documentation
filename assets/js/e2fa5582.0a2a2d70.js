"use strict";(self.webpackChunkpterodactyl=self.webpackChunkpterodactyl||[]).push([[33],{5518:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var t=i(5893),s=i(1151);const a={},l="CentOS 7",o={id:"community/installation-guides/panel/centos7",title:"CentOS 7",description:"In this guide we will install Pterodactyl v1.X \u2014 including all of it's dependencies \u2014 and configure our webserver",source:"@site/docs/community/installation-guides/panel/centos7.md",sourceDirName:"community/installation-guides/panel",slug:"/community/installation-guides/panel/centos7",permalink:"/pterodactyl-documentation/docs/community/installation-guides/panel/centos7",draft:!1,unlisted:!1,editUrl:"https://github.com/QuintenQVD0/pterodactyl-documentation/blob/main/docs/community/installation-guides/panel/centos7.md",tags:[],version:"current",frontMatter:{},sidebar:"CommunitySidebar",previous:{title:"Community Guides and Tutorials",permalink:"/pterodactyl-documentation/docs/community/community_guides/about"},next:{title:"CentOS 8, Rocky Linux 8, AlmaLinux 8",permalink:"/pterodactyl-documentation/docs/community/installation-guides/panel/centos8"}},r={},d=[{value:"Install Requirements and Additional Utilities",id:"install-requirements-and-additional-utilities",level:2},{value:"SELinux tools",id:"selinux-tools",level:3},{value:"MariaDB",id:"mariadb",level:3},{value:"PHP 8.0",id:"php-80",level:3},{value:"Composer",id:"composer",level:3},{value:"Install Utility Packages",id:"install-utility-packages",level:2},{value:"Nginx",id:"nginx",level:3},{value:"Redis",id:"redis",level:3},{value:"SELinux commands",id:"selinux-commands",level:4},{value:"Server Configuration",id:"server-configuration",level:2},{value:"Configuring MariaDB",id:"configuring-mariadb",level:3},{value:"Adding MariaDB user",id:"adding-mariadb-user",level:4},{value:"Setup PHP",id:"setup-php",level:3},{value:"Nginx",id:"nginx-1",level:3},{value:"SSL Configuration",id:"ssl-configuration",level:4},{value:"Redis Setup",id:"redis-setup",level:3},{value:"Installing the Panel",id:"installing-the-panel",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"centos-7",children:"CentOS 7"}),"\n",(0,t.jsx)(n.p,{children:"In this guide we will install Pterodactyl v1.X \u2014 including all of it's dependencies \u2014 and configure our webserver\nto serve it using SSL."}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["This guide is based off the ",(0,t.jsx)(n.a,{href:"/pterodactyl-documentation/docs/documentation/panel/getting_started",children:"official installation documentation"})," but is tailored specifically for CentOS 7."]})}),"\n",(0,t.jsx)(n.h2,{id:"install-requirements-and-additional-utilities",children:"Install Requirements and Additional Utilities"}),"\n",(0,t.jsxs)(n.p,{children:["We will install all of Pterodactyl's ",(0,t.jsx)(n.a,{href:"/pterodactyl-documentation/docs/documentation/panel/getting_started#dependencies",children:"required"})," dependencies and a few aditional utilities."]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["If you run ",(0,t.jsx)(n.code,{children:"sestatus"})," and it shows ",(0,t.jsx)(n.code,{children:"SELinux status: enabled"})," you should install the following packages for later"]})}),"\n",(0,t.jsx)(n.h3,{id:"selinux-tools",children:"SELinux tools"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yum install -y policycoreutils policycoreutils-python selinux-policy selinux-policy-targeted libselinux-utils setroubleshoot-server setools setools-console mcstrans\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mariadb",children:"MariaDB"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"## Install Repos\ncat <<EOF > /etc/yum.repos.d/mariadb.repo\n# MariaDB 10.5 CentOS repository list - created 2017-07-14 12:40 UTC\n# http://downloads.mariadb.org/mariadb/repositories/\n[mariadb]\nname = MariaDB\nbaseurl = http://yum.mariadb.org/10.5/centos7-amd64\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\ngpgcheck=1\nEOF\n\n## Get yum updates\nyum update -y\n\n## Install MariaDB 10.5\nyum install -y MariaDB-common MariaDB-server\n\n## Start maraidb\nsystemctl start mariadb\nsystemctl enable mariadb\n"})}),"\n",(0,t.jsx)(n.h3,{id:"php-80",children:"PHP 8.0"}),"\n",(0,t.jsx)(n.p,{children:"We recommend the remi repo to get the latest php packages."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"## Install Repos\nyum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\nyum -y install https://rpms.remirepo.net/enterprise/remi-release-7.rpm\nyum install -y yum-utils\nyum-config-manager --disable 'remi-php*'\nyum-config-manager --enable remi-php80\n\n## Get yum updates\nyum update -y\n\n## Install PHP 8.0\nyum install -y php php-{common,fpm,cli,json,mysqlnd,mcrypt,gd,mbstring,pdo,zip,bcmath,dom,opcache}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"composer",children:"Composer"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yum install -y zip unzip # Required for Composer\ncurl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\n"})}),"\n",(0,t.jsx)(n.h2,{id:"install-utility-packages",children:"Install Utility Packages"}),"\n",(0,t.jsx)(n.h3,{id:"nginx",children:"Nginx"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yum install -y nginx\n\nfirewall-cmd --add-service=http --permanent\nfirewall-cmd --add-service=https --permanent \nfirewall-cmd --reload\n"})}),"\n",(0,t.jsx)(n.h3,{id:"redis",children:"Redis"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yum install -y --enablerepo=remi redis\n\nsystemctl start redis\nsystemctl enable redis\n"})}),"\n",(0,t.jsx)(n.h4,{id:"selinux-commands",children:"SELinux commands"}),"\n",(0,t.jsx)(n.p,{children:"The following command will allow nginx to work with redis and"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"setsebool -P httpd_can_network_connect 1\nsetsebool -P httpd_execmem 1\nsetsebool -P httpd_unified 1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-configuration",children:"Server Configuration"}),"\n",(0,t.jsx)(n.p,{children:"This following section covers the configuration of parts of the server to run the panel."}),"\n",(0,t.jsx)(n.h3,{id:"configuring-mariadb",children:"Configuring MariaDB"}),"\n",(0,t.jsxs)(n.p,{children:["The fastest way to set up mariadb is to use the ",(0,t.jsx)(n.code,{children:"mysql_secure_installation"})," command and follow prompts"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mysql_secure_installation\n"})}),"\n",(0,t.jsx)(n.p,{children:"The following are safe defaults."}),"\n",(0,t.jsxs)(n.p,{children:["Change to your own secure password",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"Set root password? [Y/n] Y"})]}),"\n",(0,t.jsxs)(n.p,{children:["Get rid of users that could access the db by default",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"Remove anonymous users? [Y/n] Y"})]}),"\n",(0,t.jsxs)(n.p,{children:["Keep root off the external interfaces",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"Disallow root login remotely? [Y/n] Y"})]}),"\n",(0,t.jsxs)(n.p,{children:["Extra databases that aren't needed",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"Remove test database and access to it? [Y/n] Y"})]}),"\n",(0,t.jsxs)(n.p,{children:["Clears and sets all the changes made",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"Reload privilege tables now? [Y/n] Y"})]}),"\n",(0,t.jsxs)(n.p,{children:["All done! If you've completed all of the above steps, your MariaDB",(0,t.jsx)(n.br,{}),"\n","installation should now be secure."]}),"\n",(0,t.jsx)(n.h4,{id:"adding-mariadb-user",children:"Adding MariaDB user"}),"\n",(0,t.jsxs)(n.p,{children:["To add your first user to the database, see our tutorial on ",(0,t.jsx)(n.a,{href:"/pterodactyl-documentation/docs/documentation/tutorials/mysql_setup",children:"setting up MySQL"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"setup-php",children:"Setup PHP"}),"\n",(0,t.jsxs)(n.p,{children:["Place the contents below in a file inside the ",(0,t.jsx)(n.code,{children:"/etc/php-fpm.d"})," folder. The file can be named anything, but a good standard is ",(0,t.jsx)(n.code,{children:"www-pterodactyl.conf"}),". This config will match the nginx config later in the guide."]}),"\n",(0,t.jsx)(n.p,{children:"Start and enable php-fpm on the system."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"systemctl enable php-fpm\nsystemctl start php-fpm\n"})}),"\n",(0,t.jsx)(n.h3,{id:"nginx-1",children:"Nginx"}),"\n",(0,t.jsxs)(n.p,{children:["Please check our ",(0,t.jsx)(n.a,{href:"/pterodactyl-documentation/docs/documentation/tutorials/creating_ssl_certificates",children:"tutorial"})," on generating SSL certificates for more information."]}),"\n",(0,t.jsx)(n.h4,{id:"ssl-configuration",children:"SSL Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"redis-setup",children:"Redis Setup"}),"\n",(0,t.jsxs)(n.p,{children:["The default Redis install is perfectly fine for the panel. If you have Redis already in use you may want to look into\n",(0,t.jsx)(n.a,{href:"https://community.pivotal.io/s/article/How-to-setup-and-run-multiple-Redis-server-instances-on-a-Linux-host",children:"running another Redis instance"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"installing-the-panel",children:"Installing the Panel"}),"\n",(0,t.jsxs)(n.p,{children:["Excellent, we now have all of the required dependencies installed and configured. From here, follow the ",(0,t.jsx)(n.a,{href:"/pterodactyl-documentation/docs/documentation/panel/getting_started#download-files",children:"official Panel installation documentation"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>l});var t=i(7294);const s={},a=t.createContext(s);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);