"use strict";(self.webpackChunkpterodactyl=self.webpackChunkpterodactyl||[]).push([[4844],{3503:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"documentation/panel/updating","title":"Updating the Panel","description":"This documentation covers the process for updating within the 1.x series of releases. This means updating from","source":"@site/docs/documentation/panel/updating.md","sourceDirName":"documentation/panel","slug":"/panel/updating","permalink":"/pterodactyl-documentation/docs/panel/updating","draft":false,"unlisted":false,"editUrl":"https://github.com/QuintenQVD0/pterodactyl-documentation/blob/main/docs/documentation/panel/updating.md","tags":[],"version":"current","frontMatter":{"slug":"/panel/updating"},"sidebar":"DocsSidebar","previous":{"title":"Additional Configuration","permalink":"/pterodactyl-documentation/docs/panel/configuration"},"next":{"title":"Troubleshooting","permalink":"/pterodactyl-documentation/docs/panel/troubleshooting"}}');var s=t(4848),d=t(8453);const a={slug:"/panel/updating"},i="Updating the Panel",o={},l=[{value:"Panel Version Requirements",id:"panel-version-requirements",level:2},{value:"Update Dependencies",id:"update-dependencies",level:2},{value:"Self Upgrade",id:"self-upgrade",level:2},{value:"Manual Upgrade",id:"manual-upgrade",level:2},{value:"Enter Maintenance Mode",id:"enter-maintenance-mode",level:3},{value:"Download the Update",id:"download-the-update",level:3},{value:"Update Dependencies",id:"update-dependencies-1",level:3},{value:"Clear Compiled Template Cache",id:"clear-compiled-template-cache",level:3},{value:"Database Updates",id:"database-updates",level:3},{value:"Set Permissions",id:"set-permissions",level:3},{value:"Restarting Queue Workers",id:"restarting-queue-workers",level:3},{value:"Exit Maintenance Mode",id:"exit-maintenance-mode",level:3},{value:"Telemetry",id:"telemetry",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"updating-the-panel",children:"Updating the Panel"})}),"\n",(0,s.jsxs)(n.p,{children:["This documentation covers the process for updating within the ",(0,s.jsx)(n.code,{children:"1.x"})," series of releases. This means updating from\n\u2014 for example \u2014 ",(0,s.jsx)(n.code,{children:"1.5.0"})," to ",(0,s.jsx)(n.code,{children:"1.6.0"}),". ",(0,s.jsxs)(n.strong,{children:["Do not use this guide for upgrading from ",(0,s.jsx)(n.code,{children:"0.7"}),"."]})]}),"\n",(0,s.jsx)(n.h2,{id:"panel-version-requirements",children:"Panel Version Requirements"}),"\n",(0,s.jsx)(n.p,{children:"Each version of Pterodactyl Panel also has a corresponding minimum version of Wings that\nis required for it to run. Please see the chart below for how these versions line up. In\nmost cases your base Wings version should match that of your Panel."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Panel Version"}),(0,s.jsx)(n.th,{children:"Wings Version"}),(0,s.jsx)(n.th,{children:"Supported"}),(0,s.jsx)(n.th,{children:"PHP Versions"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.0.x"}),(0,s.jsx)(n.td,{children:"1.0.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.3, 7.4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.1.x"}),(0,s.jsx)(n.td,{children:"1.1.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.3, 7.4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.2.x"}),(0,s.jsx)(n.td,{children:"1.2.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.3, 7.4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.3.x"}),(0,s.jsx)(n.td,{children:"1.3.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.4.x"}),(0,s.jsx)(n.td,{children:"1.4.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.5.x"}),(0,s.jsx)(n.td,{children:"1.4.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.6.x"}),(0,s.jsx)(n.td,{children:"1.4.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.7.x"}),(0,s.jsx)(n.td,{children:"1.5.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.8.x"}),(0,s.jsx)(n.td,{children:"1.6.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0, 8.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.9.x"}),(0,s.jsx)(n.td,{children:"1.6.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0, 8.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1.10.x"}),(0,s.jsx)(n.td,{children:"1.7.x"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"7.4, 8.0, 8.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"1.11.x"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"1.11.x"})}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"8.1"})})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"NOTE: There are no 1.8.x, 1.9.x, or 1.10.x releases of Wings."})}),"\n",(0,s.jsx)(n.h2,{id:"update-dependencies",children:"Update Dependencies"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["PHP ",(0,s.jsx)(n.code,{children:"8.1"})]}),"\n",(0,s.jsxs)(n.li,{children:["Composer ",(0,s.jsx)(n.code,{children:"2.X"})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"PHP 7.4 & 8.0",type:"danger",children:(0,s.jsx)(n.p,{children:"Support for PHP 7.4 & 8.0 has been removed with the release of 1.11.4. Please upgrade to PHP 8.1"})}),"\n",(0,s.jsx)(n.admonition,{title:"Future PHP Version Changes",type:"caution",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Support for PHP 8.0 is deprecated"}),". Please plan accordingly \u2014 PHP 8.1 or newer\nwill be the only supported version in 1.11.4 and beyond."]})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Before continuing"}),", please ensure that your system and web server configuration has been upgraded to at least PHP 8.1 by running ",(0,s.jsx)(n.code,{children:"php -v"})," and Composer 2 by running ",(0,s.jsx)(n.code,{children:"composer --version"}),". You\nshould see an output similar to the result below. If you do not see at least PHP 8.1 and Composer 2, you will need to upgrade by following\nour ",(0,s.jsx)(n.a,{href:"/pterodactyl-documentation/docs/guides/php_upgrade",children:"PHP Upgrade Guide"})," and return to this documentation afterward."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"vagrant@pterodactyl:~/app$ php -v\nPHP 8.1.5 (cli) (built: Apr 21 2022 10:32:13) (NTS)\nCopyright (c) The PHP Group\nZend Engine v4.1.5, Copyright (c) Zend Technologies\n    with Zend OPcache v8.1.5, Copyright (c), by Zend Technologies\n\nvagrant@pterodactyl:~/app$ composer --version\nComposer version 2.3.5 2022-04-13 16:43:00\n"})}),"\n",(0,s.jsx)(n.h2,{id:"self-upgrade",children:"Self Upgrade"}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"The self-upgrade is currently in-operable due to issues with some dependencies we make use of.\nFor the time being please perform a manual upgrade until this issue can be resolved."})}),"\n",(0,s.jsx)(n.h2,{id:"manual-upgrade",children:"Manual Upgrade"}),"\n",(0,s.jsx)(n.p,{children:"If you prefer not to perform the automatic self-upgrade, or need to reference any upgrade steps you can follow\nthe documentation below."}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"If you've already performed the self-upgrade successfully you do not need to do anything else on this page."})}),"\n",(0,s.jsx)(n.h3,{id:"enter-maintenance-mode",children:"Enter Maintenance Mode"}),"\n",(0,s.jsx)(n.p,{children:"Whenever you are performing an update you should be sure to place your Panel into maintenance mode. This will prevent\nusers from encountering unexpected errors and ensure everything can be updated before users encounter\npotentially new features."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /var/www/pterodactyl\n\nphp artisan down\n"})}),"\n",(0,s.jsx)(n.h3,{id:"download-the-update",children:"Download the Update"}),"\n",(0,s.jsx)(n.p,{children:"The first step in the update process is to download the new panel files from GitHub. The command below will download\nthe release archive for the most recent version of Pterodactyl, save it in the current directory and will automatically\nunpack the archive into your current folder."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -L https://github.com/pterodactyl/panel/releases/latest/download/panel.tar.gz | tar -xzv\n"})}),"\n",(0,s.jsx)(n.p,{children:"Once all of the files are downloaded we need to set the correct permissions on the cache and storage directories to avoid\nany webserver related errors."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chmod -R 755 storage/* bootstrap/cache\n"})}),"\n",(0,s.jsx)(n.h3,{id:"update-dependencies-1",children:"Update Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"After you've downloaded all of the new files you will need to upgrade the core components of the panel. To do this,\nsimply run the commands below and follow any prompts."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"composer install --no-dev --optimize-autoloader\n"})}),"\n",(0,s.jsx)(n.h3,{id:"clear-compiled-template-cache",children:"Clear Compiled Template Cache"}),"\n",(0,s.jsx)(n.p,{children:"You'll also want to clear the compiled template cache to ensure that new and modified templates show up correctly for\nusers."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan view:clear\nphp artisan config:clear\n"})}),"\n",(0,s.jsx)(n.h3,{id:"database-updates",children:"Database Updates"}),"\n",(0,s.jsxs)(n.p,{children:["You'll also need to update your database schema for the newest version of Pterodactyl. Running the command below\nwill update the schema and ensure the default eggs we ship are up to date (and add any new ones we might have). Just\nremember, ",(0,s.jsx)(n.em,{children:"never edit core eggs we ship"}),"! They will be overwritten by this update process."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan migrate --seed --force\n"})}),"\n",(0,s.jsx)(n.h3,{id:"set-permissions",children:"Set Permissions"}),"\n",(0,s.jsxs)(n.p,{children:["The last step is to set the proper owner of the files to be the user that runs your webserver. In most cases this\nis ",(0,s.jsx)(n.code,{children:"www-data"})," but can vary from system to system \u2014 sometimes being ",(0,s.jsx)(n.code,{children:"nginx"}),", ",(0,s.jsx)(n.code,{children:"caddy"}),", ",(0,s.jsx)(n.code,{children:"apache"}),", or even ",(0,s.jsx)(n.code,{children:"nobody"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# If using NGINX or Apache (not on CentOS):\nchown -R www-data:www-data /var/www/pterodactyl/*\n\n# If using NGINX on CentOS:\nchown -R nginx:nginx /var/www/pterodactyl/*\n\n# If using Apache on CentOS\nchown -R apache:apache /var/www/pterodactyl/*\n"})}),"\n",(0,s.jsx)(n.h3,{id:"restarting-queue-workers",children:"Restarting Queue Workers"}),"\n",(0,s.jsxs)(n.p,{children:["After ",(0,s.jsx)(n.em,{children:"every"})," update you should restart the queue worker to ensure that the new code is loaded in and used."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan queue:restart\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exit-maintenance-mode",children:"Exit Maintenance Mode"}),"\n",(0,s.jsx)(n.p,{children:"Now that everything has been updated you need to exit maintenance mode so that the Panel can resume accepting\nconnections."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan up\n"})}),"\n",(0,s.jsx)(n.h3,{id:"telemetry",children:"Telemetry"}),"\n",(0,s.jsxs)(n.p,{children:["Since 1.11, Pterodactyl will collect anonymous telemetry to help us better understand how the\nsoftware is being used. To learn more about this feature and to opt-out, please see our ",(0,s.jsx)(n.a,{href:"/pterodactyl-documentation/docs/panel/configuration#telemetry",children:"Telemetry"}),"\ndocumentation. Remember to continue with the rest of the upgrade."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/pterodactyl-documentation/docs/wings/upgrading",children:"Final Step: Upgrade Wings"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var r=t(6540);const s={},d=r.createContext(s);function a(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);